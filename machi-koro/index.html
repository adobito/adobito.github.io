<!DOCTYPE html>
<html>

<head>
  <title>Dice Roller</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #result {
      font-size: 6vw;
      text-align: center;
    }

    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: center;
    }


    button {
      width: 20vw;
      /* max-width: 150px; */
      height: 20vw;
      /* max-height: 150px; */
      font-size: 6vw;
      margin: 10px;
      border-radius: 10px;
      border: none;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      transition-duration: 0.4s;
      cursor: pointer;
    }

    #one-die {
      background-color: #4C28D3;
      color: white;
    }

    #two-dice {
      background-color: #900C3F;
      color: white;
    }

    button:hover {
      opacity: 0.8;
    }

    #dice-odds.td,
    #dice-stats.td {
      font-size: 4vw;
    }

    @media screen and (max-width: 600px) {
      button {
        width: 50vw;
        height: 50vw;
        font-size: 16vw;
      }

      table {
        font-size: 6vw;
      }
    }

    @media screen and (min-width: 601px) and (max-width: 1200px) {
      table {
        font-size: 4vw;
      }
    }

    @media screen and (min-width: 1201px) {
      table {
        font-size: 4vw;
      }
    }

    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 600px;
      margin-top: 20px;
    }

    th,
    td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }

    .clear-frequency-button {
      font-size: 0.8em;
      padding: 0.2em 0.5em;
      height: 1.5em;
      width: 12em;
      background-color: red;
      color: white;
    }


    /* Hide all tab content by default */
    .tab-content {
      display: none;
    }

    /* Show active tab content */
    .tab-content.active {
      display: block;
    }

    /* Style for tabs */
    .tab {
      display: inline-block;
      margin: 0 10px;
      cursor: pointer;
      border: 1px solid black;
      padding: 5px 10px;
      background-color: lightgray;
    }

    /* Style for active tab */
    .tab.active {
      background-color: white;
      border-bottom: none;
    }
  </style>
</head>

<body>
  <h1>Dice Roller</h1>
  <div class="button-container">
    <button id="one-die" onclick="rollOneDie()">One Die</button>
    <button id="two-dice" onclick="rollTwoDice()">Two Dice</button>
  </div>
  <p id="result">&nbsp</p>

  <div class="tab-wrapper">
    <!-- Tab 1: Stats -->
    <div class="tab active" onclick="showTab(1)">Stats</div>

    <!-- Tab 2: Odds -->
    <div class="tab" onclick="showTab(2)">Odds</div>

    <!-- Tab 3: Order -->
    <div class="tab" onclick="showTab(3)">Order</div>
  </div>

  <!-- Tab Content 1: Stats -->
  <div class="tab-content active" id="tab-content-1">
    <table id="dice-stats">
      <thead>
        <tr>
          <th>Roll</th>
          <th>Odds</th>
          <th>Freq</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td id="odds-single-percentage-1"></td>
          <td id="single-frequency-1"></td>
        </tr>
        <tr>
          <td>2</td>
          <td id="odds-single-percentage-2"></td>
          <td id="single-frequency-2"></td>
        </tr>
        <tr>
          <td>3</td>
          <td id="odds-single-percentage-3"></td>
          <td id="single-frequency-3"></td>
        </tr>
        <tr>
          <td>4</td>
          <td id="odds-single-percentage-4"></td>
          <td id="single-frequency-4"></td>
        </tr>
        <tr>
          <td>5</td>
          <td id="odds-single-percentage-5"></td>
          <td id="single-frequency-5"></td>
        </tr>
        <tr>
          <td>6</td>
          <td id="odds-single-percentage-6"></td>
          <td id="single-frequency-6"></td>
        </tr>
        <tr>
          <td></td>
        </tr>
        <tr>
          <td>2</td>
          <td id="odds-double-percentage-2"></td>
          <td id="double-frequency-2"></td>
        </tr>
        <tr>
          <td>3</td>
          <td id="odds-double-percentage-3"></td>
          <td id="double-frequency-3"></td>
        </tr>
        <tr>
          <td>4</td>
          <td id="odds-double-percentage-4"></td>
          <td id="double-frequency-4"></td>
        </tr>
        <tr>
          <td>5</td>
          <td id="odds-double-percentage-5"></td>
          <td id="double-frequency-5"></td>
        </tr>
        <tr>
          <td>6</td>
          <td id="odds-double-percentage-6"></td>
          <td id="double-frequency-6"></td>
        </tr>
        <tr>
          <td>7</td>
          <td id="odds-double-percentage-7"></td>
          <td id="double-frequency-7"></td>
        </tr>
        <tr>
          <td>8</td>
          <td id="odds-double-percentage-8"></td>
          <td id="double-frequency-8"></td>
        </tr>
        <tr>
          <td>9</td>
          <td id="odds-double-percentage-9"></td>
          <td id="double-frequency-9"></td>
        </tr>
        <tr>
          <td>10</td>
          <td id="odds-double-percentage-10"></td>
          <td id="double-frequency-10"></td>
        </tr>
        <tr>
          <td>11</td>
          <td id="odds-double-percentage-11"></td>
          <td id="double-frequency-11"></td>
        </tr>
        <tr>
          <td>12</td>
          <td id="odds-double-percentage-12"></td>
          <td id="double-frequency-12"></td>
        </tr>
      </tbody>
    </table>
    <div style="display:flex; justify-content:center;">
      <button class="clear-frequency-button" onclick="clearFrequencyData()">Clear Frequency Data</button>
    </div>
  </div>

  <!-- Tab Content 2: Odds -->
  <div class="tab-content" id="tab-content-2">
    <table id="dice-odds">
      <thead>
        <tr>
          <th>Roll</th>
          <th>Odds</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td id="odds-single-1"></td>
        </tr>
        <tr>
          <td>2</td>
          <td id="odds-single-2"></td>
        </tr>
        <tr>
          <td>3</td>
          <td id="odds-single-3"></td>
        </tr>
        <tr>
          <td>4</td>
          <td id="odds-single-4"></td>
        </tr>
        <tr>
          <td>5</td>
          <td id="odds-single-5"></td>
        </tr>
        <tr>
          <td>6</td>
          <td id="odds-single-6"></td>
        </tr>
        <tr>
          <td></td>
        </tr>
        <tr>
          <td>2</td>
          <td id="odds-double-2"></td>
        </tr>
        <tr>
          <td>3</td>
          <td id="odds-double-3"></td>
        </tr>
        <tr>
          <td>4</td>
          <td id="odds-double-4"></td>
        </tr>
        <tr>
          <td>5</td>
          <td id="odds-double-5"></td>
        </tr>
        <tr>
          <td>6</td>
          <td id="odds-double-6"></td>
        </tr>
        <tr>
          <td>7</td>
          <td id="odds-double-7"></td>
        </tr>
        <tr>
          <td>8</td>
          <td id="odds-double-8"></td>
        </tr>
        <tr>
          <td>9</td>
          <td id="odds-double-9"></td>
        </tr>
        <tr>
          <td>10</td>
          <td id="odds-double-10"></td>
        </tr>
        <tr>
          <td>11</td>
          <td id="odds-double-11"></td>
        </tr>
        <tr>
          <td>12</td>
          <td id="odds-double-12"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Tab Content 3: Order -->
  <div class="tab-content" id="tab-content-3">
    <table>
      <tr>
        <th>Order</th>
      </tr>
      <tr>
        <td style="background-color: red; color: white;">Restaurants</td>
      </tr>
      <tr>
        <td style="background: linear-gradient(to right, #0000ff, #00ff00);">Primary & Secondary Industries</td>
      </tr>
      <tr>
        <td style="background-color: purple; color: white;">Major Establishments</td>
      </tr>
      <tr>
        <td style="background-color: orange; color: white;">Landmarks</td>
      </tr>
    </table>
  </div>

  <script>
    function showTab(tabIndex) {
      // Get all tab content and tabs
      var tabContent = document.getElementsByClassName('tab-content');
      var tabs = document.getElementsByClassName('tab');

      // Hide all tab content
      for (var i = 0; i < tabContent.length; i++) {
        tabContent[i].classList.remove('active');
      }

      // Deactivate all tabs
      for (var i = 0; i < tabs.length; i++) {
        tabs[i].classList.remove('active');
      }

      // Activate selected tab and content
      document.getElementById('tab-content-' + tabIndex).classList.add('active');
      document.getElementsByClassName('tab')[tabIndex - 1].classList.add('active');
    }
  </script>

  <script>
    function getSinglesFrequencyJson() {
      let frequency = JSON.parse(localStorage.getItem('singles-frequency')) || {
        1: 0,
        2: 0,
        3: 0,
        4: 0,
        5: 0,
        6: 0
      };
      return frequency;
    }
    function getDoublesFrequencyJson() {
      let frequency = JSON.parse(localStorage.getItem('doubles-frequency')) || {
        2: 0,
        3: 0,
        4: 0,
        5: 0,
        6: 0,
        7: 0,
        8: 0,
        9: 0,
        10: 0,
        11: 0,
        12: 0
      };
      return frequency;
    }
    function clearFrequencyData() {
      if (confirm("Are you sure you want to clear frequency data?")) {
        let singlesFrequency = {
          1: 0,
          2: 0,
          3: 0,
          4: 0,
          5: 0,
          6: 0
        };
        localStorage.setItem('singles-frequency', JSON.stringify(singlesFrequency));
        let doublesFrequency = {
          2: 0,
          3: 0,
          4: 0,
          5: 0,
          6: 0,
          7: 0,
          8: 0,
          9: 0,
          10: 0,
          11: 0,
          12: 0
        };
        localStorage.setItem('doubles-frequency', JSON.stringify(doublesFrequency));
        updateFrequencyCells();
      }

    }
    function storeSingleDiceFrequency(diceRoll) {
      let frequency = getSinglesFrequencyJson();
      frequency[diceRoll] += 1;

      // Store the updated frequency object in storage
      localStorage.setItem('singles-frequency', JSON.stringify(frequency));
    }
    function storeDoubleDiceFrequency(diceRoll) {
      let frequency = getDoublesFrequencyJson();
      frequency[diceRoll] += 1;

      // Store the updated frequency object in storage
      localStorage.setItem('doubles-frequency', JSON.stringify(frequency));
    }
    function rollOneDie() {
      const roll = Math.floor(Math.random() * 6) + 1;
      storeSingleDiceFrequency(roll)
      const resultEl = document.getElementById("result");
      updateFrequencyCells();
      resultEl.textContent = `${roll}`;
    }

    function rollTwoDice() {
      const roll1 = Math.floor(Math.random() * 6) + 1;
      const roll2 = Math.floor(Math.random() * 6) + 1;
      const total = roll1 + roll2;
      storeDoubleDiceFrequency(total);
      const resultEl = document.getElementById("result");
      updateFrequencyCells();
      resultEl.textContent = `${roll1} + ${roll2} = ${total}`;
    }

    function getSinglesFrequencyPercentage(number) {
      let frequencyData = getSinglesFrequencyJson();
      let sum = Object.values(frequencyData).reduce((accumulator, currentValue) => accumulator + currentValue);
      if (sum == 0) {
        sum = 1;
      }
      return ((frequencyData[number] / sum) * 100).toFixed(2);
    }

    function getDoublesFrequencyPercentage(number) {
      let frequencyData = getDoublesFrequencyJson();
      let sum = Object.values(frequencyData).reduce((accumulator, currentValue) => accumulator + currentValue);
      if (sum == 0) {
        sum = 1;
      }
      return ((frequencyData[number] / sum) * 100).toFixed(2);
    }
    function updateFrequencyCells() {
      for (var i = 1; i <= 6; i++) {
        var roll = i; // Roll values start at 2
        var frequencyId = "single-frequency-" + roll; // ID of frequency cell for this roll
        var frequencyCell = document.getElementById(frequencyId);
        if (frequencyCell) { // Check if frequency cell exists
          let frequencyPercentage = getSinglesFrequencyPercentage(i);
          let oddsPercentage = getSingleDiceOddsPercentage(i);
          let percentageDifference = frequencyPercentage - oddsPercentage;
          // allow +- 50% of actual odds
          let percentageThreshold = oddsPercentage / 2;
          frequencyCell.textContent = `${frequencyPercentage}%`;
          if (percentageDifference < -percentageThreshold) {
            frequencyCell.style.color = 'red';
          } else if (percentageDifference > percentageThreshold) {
            frequencyCell.style.color = 'purple';
          } else {
            frequencyCell.style.color = 'green';
          }
        }
      }
      for (var i = 2; i <= 12; i++) {
        var roll = i; // Roll values start at 2
        var frequencyId = "double-frequency-" + roll; // ID of frequency cell for this roll
        var frequencyCell = document.getElementById(frequencyId);
        if (frequencyCell) { // Check if frequency cell exists
          let frequencyPercentage = getDoublesFrequencyPercentage(i);
          let oddsPercentage = getDoubleDiceOddsPercentage(i);
          let percentageDifference = frequencyPercentage - oddsPercentage;
          // allow +- 50% of actual odds
          let percentageThreshold = oddsPercentage / 2;
          frequencyCell.textContent = `${frequencyPercentage}%`;
          if (percentageDifference < -percentageThreshold) {
            frequencyCell.style.color = 'red';
          } else if (percentageDifference > percentageThreshold) {
            frequencyCell.style.color = 'purple';
          } else {
            frequencyCell.style.color = 'green';
          }
        }
      }
    }

    function getSingleDiceOddsPercentage(number) {
      return (100 * 1 / 6).toFixed(2);
    }
    function getDoubleDiceOddsPercentage(number) {
      // Calculate the odds of rolling each value from 2 to 12
      const odds = {};
      for (let i = 2; i <= 12; i++) {
        odds[i] = 0;
        for (let j = 1; j <= 6; j++) {
          for (let k = 1; k <= 6; k++) {
            if (j + k === i) {
              odds[i]++;
            }
          }
        }
        odds[i] = (100 * odds[i] / 36).toFixed(2);
      }
      return odds[number];
    }

    function updateOddsPercentageCells() {
      // Display the odds in the table
      for (var i = 2; i <= 12; i++) {
        const oddsEl = document.getElementById(`odds-double-percentage-${i}`);
        oddsEl.textContent = `${getDoubleDiceOddsPercentage(i)}%`;
      }
      for (let i = 1; i <= 6; i++) {
        const oddsEl = document.getElementById(`odds-single-percentage-${i}`);
        oddsEl.textContent = `${getSingleDiceOddsPercentage(i)}%`;
      }
    }

    function updateOddsFractionCells() {
      const odds = {};
      for (let i = 2; i <= 12; i++) {
        odds[i] = 0;
        for (let j = 1; j <= 6; j++) {
          for (let k = 1; k <= 6; k++) {
            if (j + k === i) {
              odds[i]++;
            }
          }
        }
        odds[i] = `${odds[i]}/${36}`;
      }

      // Display the odds in the table
      for (const [roll, oddsValue] of Object.entries(odds)) {
        const oddsEl = document.getElementById(`odds-double-${roll}`);
        oddsEl.textContent = oddsValue;
      }

      for (let i = 1; i <= 6; i++) {
        const oddsEl = document.getElementById(`odds-single-${i}`);
        oddsEl.textContent = '1/6';
      }
    }
    updateOddsFractionCells();
    updateOddsPercentageCells();
    updateFrequencyCells();
  </script>
</body>

</html>